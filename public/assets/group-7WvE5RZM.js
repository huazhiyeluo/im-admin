import{f as I,g,o as V,S as y,y as s,z as U,l as P,w as r,c as t,A as h,C as b,E as T,F as C}from"./index-CvA2DDGm.js";import{u as S,f as N}from"./index-Dti_npMt.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";const D={style:{margin:"16px"}},F=I({__name:"group",emits:["update-parameter"],setup(L,{emit:i}){const u=i,o=g({selftUserInfo:{},personInfo:{groupId:0,ownerUid:0,type:"",name:"",info:"",icon:""},fileList:[],groupTypeOption:[{value:1,text:"美容美发"},{value:2,text:"教育培训"},{value:3,text:"工艺电子"},{value:4,text:"农林牧副"},{value:5,text:"外语外贸"}],showPicker:!1,showPickerText:""});V(()=>{d()});const d=()=>{o.selftUserInfo=y.get("userInfo")},m=({selectedOptions:a})=>{var e,l;o.showPickerText=(e=a[0])==null?void 0:e.text,o.personInfo.type=(l=a[0])==null?void 0:l.value,o.showPicker=!1},f=a=>{const e=new FormData;e.append("file",a.file),S(e).then(l=>{o.personInfo.icon=l.data})},c=()=>{let a=JSON.parse(JSON.stringify(o.personInfo));a.ownerUid=o.selftUserInfo.Uid,N(a).then(e=>{e.code==0?(T("创建成功"),o.personInfo={groupId:0,ownerUid:0,type:"",name:"",info:"",icon:""},u("update-parameter")):C(e.msg)})};return(a,e)=>{const l=s("van-uploader"),p=s("van-field"),_=s("van-cell-group"),v=s("van-button"),w=s("van-picker"),k=s("van-popup"),x=s("van-form");return U(),P(x,{class:"person-user"},{default:r(()=>[t(_,{inset:""},{default:r(()=>[t(p,{name:"uploader",label:"图标"},{input:r(()=>[t(l,{accept:"image/*",modelValue:o.fileList,"onUpdate:modelValue":e[0]||(e[0]=n=>o.fileList=n),reupload:"","max-count":"1","after-read":f},null,8,["modelValue"])]),_:1}),t(p,{modelValue:o.showPickerText,"onUpdate:modelValue":e[1]||(e[1]=n=>o.showPickerText=n),"is-link":"",readonly:"",name:"picker",label:"类型",placeholder:"点击选择",onClick:e[2]||(e[2]=n=>o.showPicker=!0)},null,8,["modelValue"]),t(p,{modelValue:o.personInfo.name,"onUpdate:modelValue":e[3]||(e[3]=n=>o.personInfo.name=n),name:"名称",label:"名称",placeholder:"名称",rules:[{required:!0,message:"请填写名称"}]},null,8,["modelValue"]),t(p,{modelValue:o.personInfo.info,"onUpdate:modelValue":e[4]||(e[4]=n=>o.personInfo.info=n),type:"textarea",name:"介绍",label:"介绍",placeholder:"介绍",rules:[{required:!0,message:"请填写介绍"}]},null,8,["modelValue"])]),_:1}),h("div",D,[t(v,{round:"",block:"",type:"primary",size:"small","native-type":"submit",onClick:c},{default:r(()=>[b(" 确认 ")]),_:1})]),t(k,{show:o.showPicker,"onUpdate:show":e[6]||(e[6]=n=>o.showPicker=n),position:"bottom"},{default:r(()=>[t(w,{columns:o.groupTypeOption,onConfirm:m,onCancel:e[5]||(e[5]=n=>o.showPicker=!1)},null,8,["columns"])]),_:1},8,["show"])]),_:1})}}}),J=B(F,[["__scopeId","data-v-476e53cd"]]);export{J as default};
