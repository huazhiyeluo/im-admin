import{f as C,x as j,g as J,o as k,S as m,y as d,z as x,j as A,A as a,c as t,B as p,w as l,C as S,E as c,F as f}from"./index-CvA2DDGm.js";import{c as N,j as B}from"./index-Dti_npMt.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";const O={class:"person-list"},T=C({__name:"person",emits:["update-parameter"],setup(z,{emit:F}){const I=j(),i=F,o=J({selftUserInfo:{},showAddFriend:!1,addFriendForm:{fromId:0,toId:"",reason:""},showJoinGroup:!1,joinGroupForm:{fromId:0,toId:"",reason:""}});k(()=>{w()});const w=()=>{o.selftUserInfo=m.get("userInfo")},h=async()=>{o.showAddFriend=!0},U=async()=>{let s=JSON.parse(JSON.stringify(o.addFriendForm));s.fromId=o.selftUserInfo.Uid,N(s).then(e=>{e.code==0?(c("添加成功"),o.addFriendForm={fromId:0,toId:"",reason:""}):f(e.msg)})},_=async()=>{o.showJoinGroup=!0},g=async()=>{let s=JSON.parse(JSON.stringify(o.joinGroupForm));s.fromId=o.selftUserInfo.Uid,B(s).then(e=>{e.code==0?(c("加入成功"),o.joinGroupForm={fromId:0,toId:"",reason:""}):f(e.msg)})},y=async()=>{i("update-parameter",1,"修改资料")},G=async()=>{i("update-parameter",2,"创建群聊")},V=async()=>{m.clear(),I.push("/login")};return(s,e)=>{const v=d("van-image"),b=d("van-button"),r=d("van-field"),u=d("van-dialog");return x(),A("div",O,[a("ul",null,[a("li",{onClick:y,class:"my-person"},[t(v,{width:"50",height:"50",round:"",src:o.selftUserInfo.Avatar},null,8,["src"]),a("span",null,p(o.selftUserInfo.Username)+" ["+p(o.selftUserInfo.Uid)+"]",1)]),a("li",{onClick:h},"添加好友"),a("li",{onClick:_},"加入群聊"),a("li",{onClick:G},"创建群聊")]),t(b,{round:"",block:"",type:"danger",size:"small","native-type":"submit",onClick:V},{default:l(()=>[S("退出登录")]),_:1}),t(u,{show:o.showAddFriend,"onUpdate:show":e[2]||(e[2]=n=>o.showAddFriend=n),title:"添加好友","show-cancel-button":"",onConfirm:U},{default:l(()=>[t(r,{modelValue:o.addFriendForm.toId,"onUpdate:modelValue":e[0]||(e[0]=n=>o.addFriendForm.toId=n),label:"",placeholder:"请输入UID"},null,8,["modelValue"]),t(r,{modelValue:o.addFriendForm.reason,"onUpdate:modelValue":e[1]||(e[1]=n=>o.addFriendForm.reason=n),type:"textarea",label:"",placeholder:"请输入理由"},null,8,["modelValue"])]),_:1},8,["show"]),t(u,{show:o.showJoinGroup,"onUpdate:show":e[5]||(e[5]=n=>o.showJoinGroup=n),title:"加入群聊","show-cancel-button":"",onConfirm:g},{default:l(()=>[t(r,{modelValue:o.joinGroupForm.toId,"onUpdate:modelValue":e[3]||(e[3]=n=>o.joinGroupForm.toId=n),label:"",placeholder:"请输入群号"},null,8,["modelValue"]),t(r,{modelValue:o.joinGroupForm.reason,"onUpdate:modelValue":e[4]||(e[4]=n=>o.joinGroupForm.reason=n),type:"textarea",label:"",placeholder:"请输入理由"},null,8,["modelValue"])]),_:1},8,["show"])])}}}),R=D(T,[["__scopeId","data-v-bd113c5c"]]);export{R as default};
